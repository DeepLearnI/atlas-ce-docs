<h1>Foundations GUI</h1>

##About the GUI
Foundations provides a user interface with which one can view all information about jobs, including status (e.g. queued, running, completed) as well as logged metrics and start time.  

## Foundations CLI

To setup the GUI, users can use the Foundations CLI command:

```shellscript
$ foundations setup
```

This will automatically pull and run the Redis via Docker as well as the Foundations GUI. Once completed, the GUI can be accessed at `https://localhost:6443`

**Note:** This method will require users to have access to the private Dessa docker repository. This can be accessed with `docker login <Dessa Repo URL>`. For more information on getting access, please reach out to the Dessa integrations team. 

## Manual Installation

The GUI images can either be built directly from the source code, or will be provided by the Dessa team. If you are building the images yourself, please refer to the instructions on [Building Images](../gui/#building-images) first, otherwise please skip ahead to [Installation with Docker](../gui/#installation-with-docker)

<h3>Dependencies</h3>

The recommended way to run the GUI is via Docker. It is recommended to use `Docker >= 18.09` which Foundations is validated against.

If you wish to build the GUI from source, we also require `Python >= 3.5` .

As with Foundations itself, there must be an accessible `redis:5` instance / installation. See the [start guide](../start_guide/) for more information.

###Building Images###

If starting the GUI with the source code, you will need to build the docker images before running them. If the images have already been built and provided by the Dessa team, skip ahead to the [Installation Process](../gui/#installation-process) below.

0. If you haven't done so already, clone the Foundations repo and checkout the desired branch (ideally the release branch of the Foundations version you will be using).
1. Navigate to the root directory of the Foundations repository.
2. Run `./build_gui.sh` &mdash; this will build and tag the images.
3. Verify the docker images are available via `docker images`. Ensure that you have the `foundations-rest-api` and `foundations-gui` images installed on your system, and both have the same tag.  If not, please tag them accordingly - any syntactically valid tag will work, so long as they're the same.
4. Now you're ready to [start the GUI](../gui/#startingstopping-the-gui)!

###Installation with Docker###

If the images have already been built and provided by the Dessa team, you will not need to build them yourself, but rather install them into your own docker instance.

1. Load the docker images into your instance via `docker pull` or `docker load -i`. Verify the docker images are available via `docker images`.
2. Ensure that you have the `foundations-rest-api` and `foundations-gui` images installed on your system, and both have the same tag.  If not, please tag them accordingly - any syntactically valid tag will work, so long as they're the same.
3. Ensure that you have the `foundations_gui.sh` script whose version matches the image versions, e.g. if you built the images from the `master` branch, grab the `foundations_gui.sh` script from the `master` branch.
4. Now you're ready to [start the GUI](../gui/#startingstopping-the-gui)!

##Starting/Stopping the GUI

Make sure you have edited the `foundations_gui.sh` script as described in step 3 of the installation process!

<h3>Starting the GUI</h3>

Before starting the GUI, you will need to set the location of your Redis installation by setting the `REDIS_URL` environment variable. Depending on where you plan to get your data from, this will need to be set to the ip address of that machine. For example, if you are trying to connect to a machine with the ip addres of `22.23.43.22`, you will need to run the following:

```bash
export REDIS_URL=redis://22.23.43.22
```

After that you can run:

`./foundations_gui.sh start ui [image_tag]`

* `image_tag` is optional - omit to use `latest` as a default

You will then be able to visit your running gui at `https://localhost:6443`. You should also be able to see the `foundations-rest-api` and `foundations-gui` images up and running with `docker ps`

<h3>Stopping the GUI</h3>

`./foundations_gui.sh stop ui`

## HTTPS on the GUI

The GUI by default is built with a provided self signed SSL certificate that works on localhost only. This means that you will only be able to access the GUI from localhost, and after accepting that your connection may not be secure through the browser (this is a standard self signed certificate situation).

To get around this, you will need to supply a `key` file and `crt` file generated by a certificate authority. This can usually be done by contacting your host provider.

## Known Issues Running On OSX
There are some known issues related to networking with Docker on OSX, which could appear as we use Docker as the backend to run the GUI. Please see [the networking features documentation](https://docs.docker.com/docker-for-mac/networking/) for details and limitations.
